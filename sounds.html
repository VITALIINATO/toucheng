<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç –Ω–∞ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –∑–≤—É–∫–æ–≤</title>
    <style>
        /* –û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç–∏–ª–∏ –æ—Å—Ç–∞—é—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            min-height: 100vh;
            padding: 10px;
            background: linear-gradient(180deg, #e0f7fa, #fcb3f6);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: #333;
            transition: background 0.5s ease;
        }

        .container {
            max-width: 800px;
            width: 100%;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
            padding: 30px;
            margin: 0 auto;
            flex: 1;
            display: flex;
            flex-direction: column;
            animation: fadeInContainer 1s ease-in-out;
        }

        @keyframes fadeInContainer {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .sound {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            margin-bottom: 30px;
        }

        .transcription-button {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 10px;
            padding: 15px 20px;
            font-size: 18px;
            cursor: pointer;
            border: none;
            border-radius: 15px;
            text-align: center;
            width: 180px;
            height: 80px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            background: linear-gradient(135deg, #b3e5fc, #81d4fa);
            color: #0277bd;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        .transcription-button:hover {
            background: linear-gradient(135deg, #4fc3f7, #29b6f6);
            transform: scale(1.05);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.2);
        }

        .examples-container {
            display: grid;
            /* grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); */
            grid-template-columns: repeat(auto-fit, minmax(150px, 150px));
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;

        }

        .example-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }

        .example-image {
            width: 100%;
            height: auto;
            border-radius: 15px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }

        .example-image:hover {
            transform: scale(1.05);
        }

        .example-button {
            width: 100%;
            padding: 15px;
            font-size: 1rem;
            background: linear-gradient(135deg, #c8e6c9, #a5d6a7);
            border: none;
            border-radius: 10px;
            color: #1b5e20;
            cursor: pointer;
            text-align: center;
            transition: background 0.3s ease;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        .example-button:hover {
            background: linear-gradient(135deg, #81c784, #66bb6a);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.2);
        }

        .example-button.selected {
            background: linear-gradient(135deg, #90caf9, #64b5f6);
            color: #fff;
        }

        .final-result .error-list {
            font-size: 32px;
            color: #d32f2f;
            /* –¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ –æ—à–∏–±–æ–∫ */
            margin-top: 20px;
        }


        .nav-buttons {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            margin: 20px 0;
        }

        .nav-buttons button {
            width: 100%;
            padding: 10px 20px;
            font-size: 1rem;
            background: linear-gradient(135deg, #b2d6ff, #80d0ff);
            color: #8d6e63;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: background 0.3s ease;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        .nav-buttons button:hover {
            background: linear-gradient(135deg, #4d94ff, #264eff);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.2);
        }

        .final-result {
            font-size: 2em;
            font-weight: 600;
            text-align: center;
            margin: 0 auto;
            padding: 25px 30px;
            position: relative;
            display: inline-block;
            background: linear-gradient(135deg, #ffffff, #f8f8f8);
            color: #2c3e50;
            border-radius: 12px;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
            animation: fadeInUp 0.8s ease-out;
        }

        .final-result::before {
            content: '';
            position: absolute;
            top: -5px;
            left: -5px;
            right: -5px;
            bottom: -5px;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.2), rgba(200, 200, 200, 0.1));
            z-index: -1;
            border-radius: 12px;
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.05);
        }

        .final-result::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 80%;
            height: 3px;
            background: linear-gradient(90deg, transparent, #3498db, transparent);
            opacity: 0.6;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(15px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –∫–Ω–æ–ø–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ */
        .restart-button {
            display: inline-block;
            margin: 35px auto 0;
            padding: 12px 28px;
            font-size: 12px;
            font-weight: 600;
            background: linear-gradient(135deg, #2c3e50, #34495e);
            color: #ffffff;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            text-decoration: none;
            outline: none;
            border: 1px solid rgba(255, 255, 255, 0.2);
            white-space: nowrap;
        }

        .restart-button:hover,
        .restart-button:focus {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
            background: linear-gradient(135deg, #34495e, #2c3e50);
        }

        .restart-button:active {
            transform: translateY(0);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        @keyframes fadeInAndScale {
            0% {
                opacity: 0;
                transform: scale(0.8);
            }

            100% {
                opacity: 1;
                transform: scale(1);
            }
        }

        @keyframes pulse {
            0% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 0.5;
            }

            50% {
                transform: translate(-50%, -50%) scale(1.2);
                opacity: 0.2;
            }

            100% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 0.5;
            }
        }

        .result {
            font-size: 1.5em;
            font-weight: bold;
            text-align: center;
            margin: 20px auto;
            padding: 15px;
            border-radius: 10px;
            color: #fff;
            background: linear-gradient(135deg, #4caf50, #388e3c);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            max-width: 600px;
            display: none;
            transition: all 0.3s ease;
        }

        .result.success {
            background: linear-gradient(135deg, #4caf50, #388e3c);
        }

        .result.error {
            background: linear-gradient(135deg, #f44336, #d32f2f);

        }

        .task-number {
            font-size: 1em;
            font-weight: bold;
            text-align: center;
            color: #1b5e20;
            margin: 0 auto;
        }

        /* –î–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ —Å—Ç–∏–ª–∏ */
        .progress-container {
            width: 100%;
            height: 10px;
            background-color: #e0e0e0;
            border-radius: 5px;
            margin: 15px 0;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            width: 0;
            background: linear-gradient(90deg, #4caf50, #8bc34a);
            transition: width 0.3s ease;
        }

        .result-detail {
            font-size: 1em;
            margin-top: 10px;
        }

        .audio-controls {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 10px;
        }

        .repeat-button {
            width: 40px;
            height: 40px;
            background: #4caf50;
            border-radius: 50%;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .repeat-button:hover {
            background: #388e3c;
        }

        .repeat-button::after {
            content: "üîÅ";
            font-size: 1.2em;
            color: white;
        }

        #confirmButton {
            max-width: 700px;
        }
    </style>
</head>

<body>
    <div class="container" id="testContainer">
        <div class="progress-container">
            <div class="progress-bar" id="progressBar"></div>
        </div>

        <div class="sound">
            <div class="task-number" id="taskNumber">–ó–∞–¥–∞–Ω–∏–µ 1</div>
            <button class="transcription-button" id="currentSoundButton">
                <span class="transcription-label">–∑–≤—É–∫</span>
                <span class="transcription-symbol" id="currentSoundSymbol"></span>
            </button>
            <!-- <div class="audio-controls">
                <button class="repeat-button" id="repeatButton" aria-label="–ü–æ–≤—Ç–æ—Ä–∏—Ç—å –∑–≤—É–∫"></button>
            </div> -->
            <!-- <div id="instruction">–í—ã–±–µ—Ä–∏ —Å–ª–æ–≤–æ —Å–æ–¥–µ—Ä–∂–∞—â–∏—Ö –¥–∞–Ω–Ω—ã–π –∑–≤—É–∫</div> -->
        </div>

        <div class="examples-container" id="testExamples"></div>

        <div class="nav-buttons">
            <button id="confirmButton" disabled>–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å</button>
        </div>

        <div class="result" id="testResult"></div>
    </div>

    <div class="final-result" id="finalResult" style="display: none;"></div>

    <audio id="audioPlayer"></audio>

    <script>
        const sounds = [
            {
                transcriptionButton: "[ É]",
                correctExamples: [
                    { word: "shop", transcription: "[ É…íp]", translation: "–º–∞–≥–∞–∑–∏–Ω", image: "shop.jpg" },
                    { word: "she", transcription: "[ ÉiÀê]", translation: "–æ–Ω–∞", image: "she.jpg" },
                    { word: "fish", transcription: "[f…™ É]", translation: "—Ä—ã–±–∞", image: "fish.jpg" }
                ],
                incorrectExamples: [
                    { word: "child", transcription: "[t Éa…™ld]", translation: "—Ä–µ–±–µ–Ω–æ–∫", image: "child.jpg" },
                    { word: "bench", transcription: "[bent É]", translation: "–ª–∞–≤–æ—á–∫–∞", image: "bench.jpg" },
                    { word: "cherry", transcription: "[Ààt Éeri]", translation: "–≤–∏—à–Ω—è", image: "cherry.jpg" },
                    { word: "sand", transcription: "[s√¶nd]", translation: "–ø–µ—Å–æ–∫", image: "sand.jpg" },
                    { word: "sun", transcription: "[s ån]", translation: "—Å–æ–ª–Ω—Ü–µ", image: "sun.jpg" },
                    { word: "smile", transcription: "['sma…™l]", translation: "—É–ª—ã–±–∫–∞", image: "smile.jpg" }
                ]
            },
            {
                transcriptionButton: "[t É]",
                correctExamples: [
                    { word: "child", transcription: "[t Éa…™ld]", translation: "—Ä–µ–±–µ–Ω–æ–∫", image: "child.jpg" },
                    { word: "bench", transcription: "[bent É]", translation: "–ª–∞–≤–æ—á–∫–∞", image: "bench.jpg" },
                    { word: "cherry", transcription: "[Ààt Éeri]", translation: "–≤–∏—à–Ω—è", image: "cherry.jpg" }
                ],
                incorrectExamples: [
                    { word: "shop", transcription: "[ É…íp]", translation: "–º–∞–≥–∞–∑–∏–Ω", image: "shop.jpg" },
                    { word: "she", transcription: "[ ÉiÀê]", translation: "–æ–Ω–∞", image: "she.jpg" },
                    { word: "fish", transcription: "[f…™ É]", translation: "—Ä—ã–±–∞", image: "fish.jpg" },
                    { word: "mice", transcription: "[ma…™s]", translation: "–º—ã—à–∏", image: "mice.jpg" },
                    { word: "face", transcription: "['fe…™s]", translation: "–ª–∏—Ü–æ", image: "face2.jpg" }
                ]
            },
            {
                transcriptionButton: "[√∞]",
                correctExamples: [
                    { word: "this", transcription: "[√∞…™s]", translation: "—ç—Ç–æ", image: "this.jpg" },
                    { word: "that", transcription: "[√∞√¶]", translation: "—Ç–æ", image: "that.jpg" },
                    { word: "they", transcription: "[√∞e…™]", translation: "–æ–Ω–∏", image: "they.jpg" }
                ],
                incorrectExamples: [
                    { word: "thin", transcription: "[Œ∏…™n]", translation: "—Ç–æ–Ω–∫–∏–π", image: "thin.jpg" },
                    { word: "moth", transcription: "[m…íŒ∏]", translation: "–º–æ—Ç—ã–ª–µ–∫", image: "moth.jpg" },
                    { word: "smith", transcription: "[sm…™Œ∏]", translation: "–∫—É–∑–Ω–µ—Ü", image: "smith.jpg" },
                    { word: "blaze", transcription: "[ble…™z]", translation: "–±–ª–µ—Å–∫", image: "blaze.jpg" },
                    { word: "zip", transcription: "[z…™p]", translation: "–∑–∞—Å—Ç–µ–∂–∫–∞", image: "zip.jpg" },
                    { word: "zone", transcription: "[zoun]", translation: "–∑–æ–Ω–∞", image: "zone.jpg" }
                ]
            },
            {
                transcriptionButton: "[Œ∏]",
                correctExamples: [
                    { word: "thin", transcription: "[Œ∏…™n]", translation: "—Ç–æ–Ω–∫–∏–π", image: "thin.jpg" },
                    { word: "moth", transcription: "[m…íŒ∏]", translation: "–º–æ—Ç—ã–ª–µ–∫", image: "moth.jpg" },
                    { word: "smith", transcription: "[sm…™Œ∏]", translation: "–∫—É–∑–Ω–µ—Ü", image: "smith.jpg" }
                ],
                incorrectExamples: [
                    { word: "this", transcription: "[√∞…™s]", translation: "—ç—Ç–æ", image: "this.jpg" },
                    { word: "that", transcription: "[√∞√¶]", translation: "—Ç–æ", image: "that.jpg" },
                    { word: "they", transcription: "[√∞e…™]", translation: "–æ–Ω–∏", image: "they.jpg" },
                    { word: "cell", transcription: "[sel]", translation: "—Å–æ—Ç", image: "cell.jpg" },
                    { word: "smile", transcription: "['sma…™l]", translation: "—É–ª—ã–±–∫–∞", image: "smile.jpg" },
                    { word: "mice", transcription: "[ma…™s]", translation: "–º—ã—à–∏", image: "mice.jpg" }
                ]
            },
            {
                transcriptionButton: "[f]",
                correctExamples: [
                    { word: "photo", transcription: "[fo äto ä]", translation: "—Ñ–æ—Ç–æ", image: "photo.jpg" },
                    { word: "alphabet", transcription: "[√¶lf…ôbet]", translation: "–∞–ª—Ñ–∞–≤–∏—Ç", image: "alphabet.jpg" },
                    { word: "phone", transcription: "[fo än]", translation: "—Ç–µ–ª–µ—Ñ–æ–Ω", image: "phone.jpg" }
                ],
                incorrectExamples: [
                    { word: "pen", transcription: "[pen]", translation: "—Ä—É—á–∫–∞", image: "pen.jpg" },
                    { word: "pet", transcription: "[pet]", translation: "–ø–∏—Ç–æ–º–µ—Ü", image: "pet.jpg" },
                    { word: "plate", transcription: "['ple…™t]", translation: "—Ç–∞—Ä–µ–ª–∫–∞", image: "plate.jpg" },
                    { word: "hand", transcription: "[h√¶nd]", translation: "—Ä—É–∫–∞", image: "hand.jpg" },
                    { word: "home", transcription: "[houm]", translation: "–¥–æ–º", image: "home.jpg" },
                    { word: "hat", transcription: "[h√¶t]", translation: "—à–∞–ø–∫–∞", image: "hat.jpg" }
                ]
            },
            {
                transcriptionButton: "[≈ã]",
                correctExamples: [
                    { word: "ring", transcription: "[r…™≈ã]", translation: "–∫–æ–ª—å—Ü–æ", image: "ring.jpg" },
                    { word: "king", transcription: "[k…™≈ã]", translation: "–∫–æ—Ä–æ–ª—å", image: "king.jpg" },
                    { word: "baking", transcription: "[be…™k…™≈ã]", translation: "–≤—ã–ø–µ—á–∫–∞", image: "baking.jpg" }
                ],
                incorrectExamples: [
                    { word: "name", transcription: "[ne…™m]", translation: "–∏–º—è", image: "name.jpg" },
                    { word: "nest", transcription: "[nest]", translation: "–≥–Ω–µ–∑–¥–æ", image: "nest.jpg" },
                    { word: "nine", transcription: "[na…™n]", translation: "–¥–µ–≤—è—Ç—å", image: "nine.jpg" },
                    { word: "van", transcription: "[v√¶n]", translation: "–≤–∞–≥–æ–Ω", image: "van.jpg" },
                    { word: "phone", transcription: "[fo än]", translation: "—Ç–µ–ª–µ—Ñ–æ–Ω", image: "phone.jpg" },
                    { word: "thin", transcription: "[Œ∏…™n]", translation: "—Ç–æ–Ω–∫–∏–π", image: "thin.jpg" }
                ]
            },
            {
                transcriptionButton: "[ í]",
                correctExamples: [
                    { word: "vision", transcription: "[v…™ ín]", translation: "–∑—Ä–µ–Ω–∏–µ", image: "vision.jpg" },
                    { word: "collision", transcription: "[k…íl…™ ín]", translation: "—Å—Ç—Ä–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ", image: "collision.jpg" },
                    { word: "division", transcription: "[d…™v…™ ín]", translation: "–ø–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ", image: "division.jpg" }
                ],
                incorrectExamples: [
                    { word: "zip", transcription: "[z…™p]", translation: "–∑–∞—Å—Ç–µ–∂–∫–∞", image: "zip.jpg" },
                    { word: "zone", transcription: "[zoun]", translation: "–∑–æ–Ω–∞", image: "zone.jpg" },
                    { word: "blaze", transcription: "[ble…™z]", translation: "–±–ª–µ—Å–∫", image: "blaze.jpg" },
                    { word: "child", transcription: "[t Éa…™ld]", translation: "—Ä–µ–±–µ–Ω–æ–∫", image: "child.jpg" },
                    { word: "this", transcription: "[√∞…™s]", translation: "—ç—Ç–æ", image: "this.jpg" },
                    { word: "fish", transcription: "[f…™ É]", translation: "—Ä—ã–±–∞", image: "fish.jpg" }
                ]
            },
            {
                transcriptionButton: "[…ëÀê]",
                correctExamples: [
                    { word: "car", transcription: "[k…ëÀêr]", translation: "–∞–≤—Ç–æ–º–æ–±–∏–ª—å", image: "car.jpg" },
                    { word: "star", transcription: "[st…ëÀêr]", translation: "–∑–≤–µ–∑–¥–∞", image: "star.jpg" },
                    { word: "cigar", transcription: "[s…™Àà…°…ëÀêr]", translation: "—Å–∏–≥–∞—Ä–∞", image: "cigar.jpg" }
                ],
                incorrectExamples: [
                    { word: "finger", transcription: "[f…™≈ãg…ô]", translation: "–ø–∞–ª–µ—Ü", image: "finger.jpg" },
                    { word: "driver", transcription: "[dra…™v…ô]", translation: "–≤–æ–¥–∏—Ç–µ–ª—å", image: "driver.jpg" },
                    { word: "flat", transcription: "[fl√¶t]", translation: "–∫–≤–∞—Ä—Ç–∏—Ä–∞", image: "flat.jpg" },
                    { word: "map", transcription: "[m√¶p]", translation: "–∫–∞—Ä—Ç–∞", image: "map.jpg" },
                    { word: "sport", transcription: "[sp…îÀêt]", translation: "—Å–ø–æ—Ä—Ç", image: "sport.jpg" },
                    { word: "north", transcription: "[n…îÀêŒ∏]", translation: "—Å–µ–≤–µ—Ä", image: "north.jpg" }
                ]
            },
            {
                transcriptionButton: "[…ô]",
                correctExamples: [
                    { word: "sister", transcription: "[s…™st…ô]", translation: "—Å–µ—Å—Ç—Ä–∞", image: "sister.jpg" },
                    { word: "finger", transcription: "[f…™≈ãg…ô]", translation: "–ø–∞–ª–µ—Ü", image: "finger.jpg" },
                    { word: "driver", transcription: "[dra…™v…ô]", translation: "–≤–æ–¥–∏—Ç–µ–ª—å", image: "driver.jpg" }
                ],
                incorrectExamples: [
                    { word: "car", transcription: "[k…ëÀêr]", translation: "–∞–≤—Ç–æ–º–æ–±–∏–ª—å", image: "car.jpg" },
                    { word: "star", transcription: "[st…ëÀêr]", translation: "–∑–≤–µ–∑–¥–∞", image: "star.jpg" },
                    { word: "cigar", transcription: "[s…™Àà…°…ëÀêr]", translation: "—Å–∏–≥–∞—Ä–∞", image: "cigar.jpg" },
                    { word: "legs", transcription: "[legz]", translation: "–Ω–æ–≥–∏", image: "legs.jpg" },
                    { word: "nest", transcription: "[nest]", translation: "–≥–Ω–µ–∑–¥–æ", image: "nest.jpg" },
                    { word: "desk", transcription: "[desk]", translation: "–¥–æ—Å–∫–∞", image: "desk.jpg" }
                ]
            },
            {
                transcriptionButton: "[…îÀê]",
                correctExamples: [
                    { word: "sport", transcription: "[sp…îÀêt]", translation: "—Å–ø–æ—Ä—Ç", image: "sport.jpg" },
                    { word: "morning", transcription: "[m…îÀên…™≈ã]", translation: "—É—Ç—Ä–æ", image: "morning.jpg" },
                    { word: "north", transcription: "[n…îÀêŒ∏]", translation: "—Å–µ–≤–µ—Ä", image: "north.jpg" }
                ],
                incorrectExamples: [
                    { word: "note", transcription: "[n…ô ät]", translation: "–Ω–æ—Ç–∞", image: "note.jpg" },
                    { word: "nose", transcription: "[n…ô äz]", translation: "–Ω–æ—Å", image: "nose.jpg" },
                    { word: "smoke", transcription: "[sm…ô äk]", translation: "–¥—ã–º", image: "smoke.jpg" },
                    { word: "dog", transcription: "[d…íg]", translation: "–ø–µ—Å", image: "dog.jpg" },
                    { word: "pot", transcription: "[p…ít]", translation: "–≥–æ—Ä—à–æ–∫", image: "pot.jpg" },
                    { word: "top", transcription: "[t…íp]", translation: "–≤–µ—Ä—à–∏–Ω–∞", image: "top.jpg" }
                ]
            },
            {
                transcriptionButton: "[…ú:]",
                correctExamples: [
                    { word: "girl", transcription: "[…°…ú:l]", translation: "–¥–µ–≤—É—à–∫–∞", image: "girl.jpg" },
                    { word: "bird", transcription: "[b…ú:d]", translation: "–ø—Ç–∏—Ü–∞", image: "bird.jpg" },
                    { word: "skirt", transcription: "[sk…ú:t]", translation: "–ø–ª–∞—Ç—å–µ", image: "skirt.jpg" }
                ],
                incorrectExamples: [
                    { word: "sport", transcription: "[sp…îÀêt]", translation: "—Å–ø–æ—Ä—Ç", image: "sport.jpg" },
                    { word: "morning", transcription: "[m…îÀên…™≈ã]", translation: "—É—Ç—Ä–æ", image: "morning.jpg" },
                    { word: "north", transcription: "[n…îÀêŒ∏]", translation: "—Å–µ–≤–µ—Ä", image: "north.jpg" },
                    { word: "sister", transcription: "[s…™st…ô]", translation: "—Å–µ—Å—Ç—Ä–∞", image: "sister.jpg" },
                    { word: "finger", transcription: "[f…™≈ãg…ô]", translation: "–ø–∞–ª–µ—Ü", image: "finger.jpg" },
                    { word: "driver", transcription: "[dra…™v…ô]", translation: "–≤–æ–¥–∏—Ç–µ–ª—å", image: "driver.jpg" }
                ]
            },
            {
                transcriptionButton: "[ ä]",
                correctExamples: [
                    { word: "book", transcription: "[b äk]", translation: "–∫–Ω–∏–≥–∞", image: "book.jpg" },
                    { word: "look", transcription: "[l äk]", translation: "–≤–∑–≥–ª—è–¥", image: "look.jpg" },
                    { word: "room", transcription: "[ruÀêm]", translation: "–∫–æ–º–Ω–∞—Ç–∞", image: "room.jpg" }
                ],
                incorrectExamples: [
                    { word: "mouth", transcription: "[ma äŒ∏]", translation: "—Ä–æ—Ç", image: "mouth.jpg" },
                    { word: "tube", transcription: "[tju:b]", translation: "—Ç—Ä—É–±–∞", image: "tube.jpg" },
                    { word: "duty", transcription: "[dju:t…™]", translation: "–¥–æ–ª–≥", image: "duty.jpg" },
                    { word: "music", transcription: "[mju:zik]", translation: "–º—É–∑—ã–∫–∞", image: "music.jpg" },
                    { word: "mum", transcription: "[m åm]", translation: "–º–∞–º–∞", image: "mum.jpg" },
                    { word: "bus", transcription: "[b ås]", translation: "–∞–≤—Ç–æ–±—É—Å", image: "bus.jpg" }
                ]
            },
            {
                transcriptionButton: "[uÀê]",
                correctExamples: [
                    { word: "moon", transcription: "[muÀên]", translation: "–ª—É–Ω–∞", image: "moon.jpg" },
                    { word: "spoon", transcription: "[spuÀên]", translation: "–ª–æ–∂–∫–∞", image: "spoon.jpg" },
                    { word: "bamboo", transcription: "[b√¶mÀàbuÀê]", translation: "–±–∞–º–±—É–∫", image: "bamboo.jpg" }
                ],
                incorrectExamples: [
                    { word: "quest", transcription: "[kwest]", translation: "–ø–æ–∏—Å–∫", image: "quest.jpg" },
                    { word: "queen", transcription: "[kwiÀên]", translation: "–∫–æ—Ä–æ–ª–µ–≤–∞", image: "queen.jpg" },
                    { word: "squirrel", transcription: "[skw…™r…ôl]", translation: "–±–µ–ª–∫–∞", image: "squirrel.jpg" },
                    { word: "gun", transcription: "[g ån]", translation: "–æ—Ä—É–∂–∏–µ", image: "gun.jpg" },
                    { word: "cute", transcription: "[kju:t]", translation: "–º–∏–ª—ã–π", image: "cute.jpg" },
                    { word: "sun", transcription: "[s ån]", translation: "—Å–æ–ª–Ω—Ü–µ", image: "sun.jpg" }
                ]
            },
            {
                transcriptionButton: "[iÀê]",
                correctExamples: [
                    { word: "green", transcription: "[gri:n]", translation: "–∑–µ–ª–µ–Ω—ã–π", image: "green.jpg" },
                    { word: "cheese", transcription: "[t Éi:z]", translation: "—Å—ã—Ä", image: "cheese.jpg" },
                    { word: "tree", transcription: "[tri:]", translation: "–¥–µ—Ä–µ–≤–æ", image: "tree.jpg" },
                    { word: "tea", transcription: "[ti:]", translation: "—á–∞–π", image: "tea.jpg" },
                    { word: "sea", transcription: "[si:]", translation: "–º–æ—Ä–µ", image: "sea.jpg" },
                    { word: "please", transcription: "[pli:z]", translation: "–ø–æ–∂–∞–ª—É–π—Å—Ç–∞", image: "please.jpg" },
                    { word: "be", transcription: "[bi:]", translation: "–±—ã—Ç—å", image: "be.jpg" },
                    { word: "leo", transcription: "[li:ou]", translation: "–ª–µ–≤", image: "leo.jpg" },
                    { word: "me", transcription: "[mi:]", translation: "—è", image: "me.jpg" }
                ],
                incorrectExamples: [
                    { word: "city", transcription: "[s…™t…™]", translation: "–≥–æ—Ä–æ–¥", image: "city.jpg" },
                    { word: "fantasy", transcription: "[f√¶nt…ôs…™]", translation: "—Ñ–∞–Ω—Ç–∞–∑–∏—è", image: "fantasy.jpg" },
                    { word: "enemy", transcription: "[en…ôm…™]", translation: "–≤—Ä–∞–≥", image: "enemy.jpg" },
                    { word: "kid", transcription: "[k…™d]", translation: "—Ä–µ–±–µ–Ω–æ–∫", image: "kid.jpg" },
                    { word: "zip", transcription: "[z…™p]", translation: "–∑–∞—Å—Ç–µ–∂–∫–∞", image: "zip.jpg" },
                    { word: "pig", transcription: "[p…™g]", translation: "—Å–≤–∏–Ω–∫–∞", image: "pig.jpg" }
                ]
            },
            {
                transcriptionButton: "[a ä]",
                correctExamples: [
                    { word: "mouth", transcription: "[ma äŒ∏]", translation: "—Ä–æ—Ç", image: "mouth.jpg" },
                    { word: "cloud", transcription: "[kla äd]", translation: "–æ–±–ª–∞–∫–æ", image: "cloud.jpg" },
                    { word: "house", transcription: "[ha äz]", translation: "–¥–æ–º", image: "house.jpg" },
                    { word: "town", transcription: "[ta än]", translation: "–≥–æ—Ä–æ–¥", image: "town.jpg" },
                    { word: "crown", transcription: "[kra än]", translation: "–∫–æ—Ä–æ–Ω–∞", image: "crown.jpg" },
                    { word: "brown", transcription: "[bra än]", translation: "–∫–æ—Ä–∏—á–Ω–µ–≤—ã–π", image: "brown.jpg" }
                ],
                incorrectExamples: [
                    { word: "bike", transcription: "[ba…™k]", translation: "–≤–µ–ª–æ—Å–∏–ø–µ–¥", image: "bike.jpg" },
                    { word: "five", transcription: "[fa…™v]", translation: "5", image: "five.jpg" },
                    { word: "smile", transcription: "['sma…™l]", translation: "—É–ª—ã–±–∫–∞", image: "smile.jpg" },
                    { word: "my", transcription: "[ma…™]", translation: "–º–æ–µ", image: "my.jpg" },
                    { word: "fly", transcription: "[fla…™]", translation: "–º—É—Ö–∞", image: "fly.jpg" },
                    { word: "sky", transcription: "[ska…™]", translation: "–Ω–µ–±–æ", image: "sky.jpg" }
                ]
            },
            {
                transcriptionButton: "[o ä]",
                correctExamples: [
                    { word: "snow", transcription: "[sno ä]", translation: "—Å–Ω–µ–≥", image: "snow.jpg" },
                    { word: "pillow", transcription: "[pilo ä]", translation: "–ø–æ–¥—É—à–∫–∞", image: "pillow.jpg" },
                    { word: "flow", transcription: "[flo ä]", translation: "–ø–æ—Ç–æ–∫", image: "flow.jpg" },
                    { word: "note", transcription: "[n…ô ät]", translation: "–Ω–æ—Ç–∞", image: "note.jpg" },
                    { word: "nose", transcription: "[n…ô äz]", translation: "–Ω–æ—Å", image: "nose.jpg" },
                    { word: "smoke", transcription: "[sm…ô äk]", translation: "–¥—ã–º", image: "smoke.jpg" }
                ],
                incorrectExamples: [
                    { word: "dog", transcription: "[d…íg]", translation: "–ø–µ—Å", image: "dog.jpg" },
                    { word: "pot", transcription: "[p…ít]", translation: "–≥–æ—Ä—à–æ–∫", image: "pot.jpg" },
                    { word: "top", transcription: "[t…íp]", translation: "–≤–µ—Ä—à–∏–Ω–∞", image: "top.jpg" },
                    { word: "book", transcription: "[b äk]", translation: "–∫–Ω–∏–≥–∞", image: "book.jpg" },
                    { word: "look", transcription: "[l äk]", translation: "–≤–∑–≥–ª—è–¥", image: "look.jpg" },
                    { word: "room", transcription: "[ruÀêm]", translation: "–∫–æ–º–Ω–∞—Ç–∞", image: "room.jpg" },
                    { word: "sport", transcription: "[sp…îÀêt]", translation: "—Å–ø–æ—Ä—Ç", image: "sport.jpg" },
                    { word: "morning", transcription: "[m…îÀên…™≈ã]", translation: "—É—Ç—Ä–æ", image: "morning.jpg" },
                    { word: "north", transcription: "[n…îÀêŒ∏]", translation: "—Å–µ–≤–µ—Ä", image: "north.jpg" }
                ]
            },
            {
                transcriptionButton: "[…™…ô]",
                correctExamples: [
                    { word: "ear", transcription: "[…™…ô]", translation: "—É—Ö–æ", image: "ear.jpg" },
                    { word: "fear", transcription: "[f…™…ô]", translation: "—Å—Ç—Ä–∞—Ö", image: "fear.jpg" },
                    { word: "year", transcription: "[j…™…ô]", translation: "–≥–æ–¥", image: "year.jpg" }
                ],
                incorrectExamples: [
                    { word: "tea", transcription: "[ti:]", translation: "—á–∞–π", image: "tea.jpg" },
                    { word: "sea", transcription: "[si:]", translation: "–º–æ—Ä–µ", image: "sea.jpg" },
                    { word: "please", transcription: "[pli:z]", translation: "–ø–æ–∂–∞–ª—É–π—Å—Ç–∞", image: "please.jpg" },
                    { word: "green", transcription: "[gri:n]", translation: "–∑–µ–ª–µ–Ω—ã–π", image: "green.jpg" },
                    { word: "cheese", transcription: "[t Éi:z]", translation: "—Å—ã—Ä", image: "cheese.jpg" },
                    { word: "tree", transcription: "[tri:]", translation: "–¥–µ—Ä–µ–≤–æ", image: "tree.jpg" }
                ]
            },
            {
                transcriptionButton: "[ ä…ô]",
                correctExamples: [
                    { word: "cure", transcription: "[kj ä…ô]", translation: "–ª–µ—á–µ–Ω–∏–µ", image: "cure.jpg" },
                    { word: "pure", transcription: "[pj ä…ô]", translation: "–±–µ—Å–ø—Ä–∏–º–µ—Å–Ω—ã–π", image: "pure.jpg" },
                    { word: "sure", transcription: "[ É ä…ô]", translation: "—É–≤–µ—Ä–µ–Ω–Ω—ã–π", image: "sure.jpg" }
                ],
                incorrectExamples: [
                    { word: "snow", transcription: "[sno ä]", translation: "—Å–Ω–µ–≥", image: "snow.jpg" },
                    { word: "pillow", transcription: "[pilo ä]", translation: "–ø–æ–¥—É—à–∫–∞", image: "pillow.jpg" },
                    { word: "flow", transcription: "[flo ä]", translation: "–ø–æ—Ç–æ–∫", image: "flow.jpg" },
                    { word: "book", transcription: "[b äk]", translation: "–∫–Ω–∏–≥–∞", image: "book.jpg" },
                    { word: "look", transcription: "[l äk]", translation: "–≤–∑–≥–ª—è–¥", image: "look.jpg" },
                    { word: "room", transcription: "[ruÀêm]", translation: "–∫–æ–º–Ω–∞—Ç–∞", image: "room.jpg" }
                ]
            },
            {
                transcriptionButton: "[…î…™]",
                correctExamples: [
                    { word: "coin", transcription: "[k…î…™n]", translation: "–º–æ–Ω–µ—Ç–∞", image: "coin.jpg" },
                    { word: "voice", transcription: "[v…î…™s]", translation: "–≥–æ–ª–æ—Å", image: "voice.jpg" },
                    { word: "oil", transcription: "[…î…™l]", translation: "–º–∞—Å–ª–æ", image: "oil.jpg" },
                    { word: "boy", transcription: "[b…î…™]", translation: "–º–∞–ª—å—á–∏–∫", image: "boy.jpg" },
                    { word: "toy", transcription: "[t…î…™]", translation: "–∏–≥—Ä—É—à–∫–∞", image: "toy.jpg" },
                    { word: "joy", transcription: "[d í…î…™]", translation: "—Ä–∞–¥–æ—Å—Ç—å", image: "joy.jpg" }
                ],
                incorrectExamples: [
                    { word: "sport", transcription: "[sp…îÀêt]", translation: "—Å–ø–æ—Ä—Ç", image: "sport.jpg" },
                    { word: "morning", transcription: "[m…îÀên…™≈ã]", translation: "—É—Ç—Ä–æ", image: "morning.jpg" },
                    { word: "note", transcription: "[n…ô ät]", translation: "–Ω–æ—Ç–∞", image: "note.jpg" },
                    { word: "nose", transcription: "[n…ô äz]", translation: "–Ω–æ—Å", image: "nose.jpg" },
                    { word: "smoke", transcription: "[sm…ô äk]", translation: "–¥—ã–º", image: "smoke.jpg" },
                    { word: "moth", transcription: "[m…íŒ∏]", translation: "–º–æ—Ç—ã–ª–µ–∫", image: "moth.jpg" },

                ]
            },


        ];
        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ




        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let shuffledSounds = []; // –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ: –¥–æ–±–∞–≤–ª–µ–Ω–æ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π
        let currentSoundIndex = 0;
        let selectedWords = [];
        let correctCount = 0;
        let wrongCount = 0;
        let wrongSounds = []; // –ú–∞—Å—Å–∏–≤ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∑–≤—É–∫–æ–≤ —Å –æ—à–∏–±–∫–∞–º–∏
        let maxTasks = 20;

        function logEvent(message) {
            try {
                const timestamp = new Date().toISOString();
                const logMessage = `${timestamp} - ${message}`;
                let logs = localStorage.getItem('testLogs') || '';
                logs += logMessage + '\n';
                localStorage.setItem('testLogs', logs);
            } catch (e) {
                console.warn("–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –ª–æ–≥:", e);
            }
        }

        function shuffleSounds() {
            const uniqueSounds = sounds.filter((sound, index, self) =>
                index === self.findIndex(s => s.transcriptionButton === sound.transcriptionButton)
            );

            shuffledSounds = [...uniqueSounds];
            shuffleArray(shuffledSounds);
            shuffledSounds = shuffledSounds.slice(0, maxTasks);
            currentSoundIndex = 0;
            wrongSounds = [];
        }

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function generateTest() {
            const currentSound = shuffledSounds[currentSoundIndex];

            // –ë–µ—Ä–µ–º 1 –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∏ 3 –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–∞
            const correctExamples = shuffleArray([...currentSound.correctExamples]);
            const correct = [correctExamples[0]]; // –í—Å–µ–≥–¥–∞ –±–µ—Ä–µ–º –æ–¥–∏–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π

            const incorrectExamples = shuffleArray([...currentSound.incorrectExamples]);
            const incorrect = incorrectExamples.slice(0, 3); // –ë–µ—Ä–µ–º 3 –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö

            const examples = shuffleArray([...correct, ...incorrect]);

            const container = document.getElementById('testExamples');
            container.innerHTML = examples.map(example => `
                <div class="example-section">
                    <img src="${example.image}" class="example-image" alt="${example.word}">
                    <button class="example-button" 
                            data-correct="${currentSound.correctExamples.some(e => e.word === example.word)}"
                            aria-label="–í—ã–±—Ä–∞—Ç—å —Å–ª–æ–≤–æ ${example.word}">
                        ${example.word}
                    </button>
                </div>
            `).join('');

            // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –∫–Ω–æ–ø–æ–∫
            document.querySelectorAll('.example-button').forEach(button => {
                button.addEventListener('click', () => selectWord(button));
                // –î–æ–±–∞–≤–ª—è–µ–º –ø–æ–¥–¥–µ—Ä–∂–∫—É –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
                button.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        selectWord(button);
                    }
                });
            });

            // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
            document.getElementById('currentSoundSymbol').textContent = currentSound.transcriptionButton;
            document.getElementById('taskNumber').textContent = `–ó–∞–¥–∞–Ω–∏–µ ${currentSoundIndex + 1}`;
            updateProgressBar();
        }

        function selectWord(button) {
            // –°–±—Ä–æ—Å –≤—Å–µ—Ö –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —Å–ª–æ–≤ –ø–µ—Ä–µ–¥ –Ω–æ–≤—ã–º –≤—ã–±–æ—Ä–æ–º
            document.querySelectorAll('.example-button').forEach(btn => {
                btn.classList.remove("selected");
                btn.setAttribute('aria-pressed', 'false');
            });
            selectedWords = [];

            // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –≤—ã–±–æ—Ä–∞
            selectedWords.push(button);
            button.classList.add("selected");
            button.setAttribute('aria-pressed', 'true');

            // –ê–∫—Ç–∏–≤–∞—Ü–∏—è –∫–Ω–æ–ø–∫–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
            document.getElementById("confirmButton").disabled = selectedWords.length !== 1;
        }

        function confirmSelection() {
            const currentSound = shuffledSounds[currentSoundIndex];
            const correctAnswers = selectedWords.filter(button =>
                button.getAttribute('data-correct') === 'true'
            );
            const resultDiv = document.getElementById("testResult");

            if (correctAnswers.length === 1) {  // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±—Ä–∞–ª –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç
                playSound("right.mp3");
                resultDiv.textContent = "–ü—Ä–∞–≤–∏–ª—å–Ω–æ!";
                resultDiv.className = "result success";
                correctCount++;
            } else {  // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±—Ä–∞–ª –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç –ò–õ–ò –Ω–µ –≤—ã–±—Ä–∞–ª –Ω–∏—á–µ–≥–æ
                playSound("wrong.mp3");
                resultDiv.textContent = "–ß—Ç–æ-—Ç–æ –Ω–µ —Ç–æ!";
                resultDiv.className = "result error";
                wrongCount++;

                // –î–æ–±–∞–≤–ª—è–µ–º –∑–≤—É–∫ –≤ —Å–ø–∏—Å–æ–∫ –æ—à–∏–±–æ–∫ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –æ–Ω –µ—â—ë –Ω–µ —Ç–∞–º
                if (!wrongSounds.some(sound =>
                    sound.transcriptionButton === currentSound.transcriptionButton
                )) {
                    wrongSounds.push(currentSound);
                }
            }

            resultDiv.style.display = "block";

            // –ë–ª–æ–∫–∏—Ä—É–µ–º –≤—Å–µ –∫–Ω–æ–ø–∫–∏ –ø–æ—Å–ª–µ –æ—Ç–≤–µ—Ç–∞
            document.querySelectorAll('.example-button').forEach(btn => {
                btn.disabled = true;
            });

            // –ü–µ—Ä–µ—Ö–æ–¥ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –∑–∞–¥–∞–Ω–∏—é –∏–ª–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ç–µ—Å—Ç–∞
            setTimeout(() => {
                resultDiv.style.display = "none";

                // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–Ω–æ–ø–æ–∫
                document.querySelectorAll('.example-button').forEach(btn => {
                    btn.classList.remove("selected");
                    btn.disabled = false;
                });

                selectedWords = [];

                if (currentSoundIndex < shuffledSounds.length - 1) {
                    currentSoundIndex++;
                    generateTest();
                } else {
                    showFinalResult();
                }
            }, 1000);
        }

        function playSound(soundFile) {
            const audioPlayer = document.getElementById('audioPlayer');
            if (!audioPlayer) return;


            audioPlayer.src = soundFile;
            audioPlayer.volume = 0.3; // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≥—Ä–æ–º–∫–æ—Å—Ç–∏ –Ω–∞ 50%
            audioPlayer.play().catch(error => {
                console.log("–ê–≤—Ç–æ–≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ:", error);
            });
        }

        function showFinalResult() {
    document.getElementById("testContainer").style.display = "none";
    const finalResultDiv = document.getElementById("finalResult");
    finalResultDiv.innerHTML = ""; // –û—á–∏—â–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–µ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ

    // –û—Å–Ω–æ–≤–Ω–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
    const resultText = document.createElement("div");
    resultText.textContent = `–†–µ–∑—É–ª—å—Ç–∞—Ç: ${correctCount}/${maxTasks}`;
    resultText.style.fontSize = "24px";
    resultText.style.marginBottom = "20px";
    resultText.style.fontWeight = "bold";
    finalResultDiv.appendChild(resultText);

    // –ë–ª–æ–∫ –æ—à–∏–±–æ–∫
    const wrongSoundsDiv = document.createElement("div");
    wrongSoundsDiv.className = "error-list"; // –ò—Å–ø–æ–ª—å–∑—É–µ–º –∫–ª–∞—Å—Å
    wrongSoundsDiv.style.marginTop = "20px";

    if (wrongSounds.length > 0) {
        const wrongSoundsList = wrongSounds.map(sound => sound.transcriptionButton).join(", ");
        wrongSoundsDiv.innerHTML = `<strong></strong> ${wrongSoundsList}`;
    } else {
        wrongSoundsDiv.textContent = "–û—à–∏–±–æ–∫ –Ω–µ—Ç! –û—Ç–ª–∏—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞!";
    }

    finalResultDiv.appendChild(wrongSoundsDiv);

    // –ö–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞
    const restartButton = document.createElement("button");
    restartButton.textContent = "–ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ";
    restartButton.className = "restart-button";
    restartButton.addEventListener("click", () => {
        logEvent('--- –ü–û–í–¢–û–†–ù–´–ô –¢–ï–°–¢ ---');
        shuffleSounds();
        generateTest();
        currentSoundIndex = 0;
        correctCount = 0;
        wrongCount = 0;
        wrongSounds = [];
        document.getElementById("testContainer").style.display = "flex";
        finalResultDiv.style.display = "none";
    });

    finalResultDiv.appendChild(restartButton);
    finalResultDiv.style.display = "block";
}
function updateProgressBar() {
            const progressBar = document.getElementById("progressBar");
            const progressPercentage = (currentSoundIndex / maxTasks) * 100;
            progressBar.style.width = `${progressPercentage}%`;
        }

        function initEventListeners() {
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–Ω–æ–ø–∫–∏ –ø–æ–≤—Ç–æ—Ä–∞ –∑–≤—É–∫–∞
            const repeatButton = document.getElementById('repeatButton');
            if (repeatButton) {
                repeatButton.addEventListener('click', () => {
                    const currentSound = shuffledSounds[currentSoundIndex];
                    playSound(currentSound.audioUrl || "default.mp3");
                });
            }

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –¥–ª—è –≤—Å–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
            document.addEventListener('keydown', (e) => {
                // –ü—Ä–æ–±–µ–ª –∏–ª–∏ Enter –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
                if ((e.key === ' ' || e.key === 'Enter') && !document.getElementById("confirmButton").disabled) {
                    e.preventDefault();
                    confirmSelection();
                }

                // Esc –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–∞
                if (e.key === 'Escape' && document.getElementById("finalResult").style.display !== "none") {
                    document.querySelector(".final-result button")?.click();
                }
            });
        }

        window.onload = () => {
            try {
                shuffleSounds();
                generateTest();
                wrongSounds = [];
                logEvent('--- –ù–ê–ß–ê–õ–û –¢–ï–°–¢–ê ---');
                initEventListeners();
            } catch (error) {
                console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Ç–µ—Å—Ç–∞:", error);
                document.getElementById("testContainer").innerHTML =
                    "<div class='error'>–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ç–µ—Å—Ç–∞. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É.</div>";
            }
        };

        document.getElementById("confirmButton").onclick = confirmSelection;

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ª–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏—è
        try {
            if (!localStorage.getItem('testLogs')) {
                localStorage.setItem('testLogs', '');
            }
        } catch (e) {
            console.warn("–õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ:", e);
        }
    </script>
</body>

</html>
