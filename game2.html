<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8" />
    <title>–ü—Ä–∞–≤–æ–ø–∏—Å–∞–Ω–∏–µ —Å–ª–æ–≤</title>
    <style>
        /* –û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç–∏–ª–∏ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            background: #f0f0f0;
        }

        #game-container {
            height: 100vh;
            font-family: 'Arial', sans-serif;
            overflow: hidden;
            background: linear-gradient(to bottom, #d0eaff, #ffffff);
            color: #333;
            text-align: center;
            transition: background 0.5s ease, color 0.5s ease;
            position: relative;
        }

        .hidden {
            display: none !important;
        }

        h1 {
            position: absolute;
            top: 60px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 28px;
            z-index: 999;
        }

        #scoreboard,
        #timer,
        #level,
        #pause-btn,
        #record {
            position: absolute;
            font-size: 20px;
            font-weight: bold;
            padding: 12px 20px;
            border-radius: 10px;
            z-index: 999;
            transition: background-color 0.3s ease;
        }

        #scoreboard {
            left: 20px;
            top: 20px;
            background-color: rgba(255, 255, 255, 0.8);
        }

        #level {
            left: 50%;
            top: 20px;
            transform: translateX(-50%);
            background-color: rgba(255, 255, 255, 0.8);
        }

        #timer {
            right: 20px;
            top: 20px;
            background-color: rgba(255, 255, 255, 0.8);
        }

        #pause-btn {
            left: 20px;
            bottom: 20px;
            font-size: 24px;
            padding: 15px 25px;
            cursor: pointer;
            user-select: none;
            transition: background-color 0.3s ease;
        }

        #record {
            right: 20px;
            bottom: 20px;
            font-size: 20px;
            color: #555;
            background: none;
            font-weight: normal;
        }

        #word-area {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
        }

        .word {
            position: absolute;
            top: -50px;
            font-size: 28px;
            padding: 15px 25px;
            border-radius: 12px;
            cursor: pointer;
            animation: fall linear forwards;
            z-index: 1;
            user-select: none;
            touch-action: manipulation;
            background-color: #28a745;
            color: rgb(3, 3, 3);
            text-align: center;
        }

        .word .translation {
            display: block;
            font-size: 22px;

            margin-top: 5px;
            color: #f8f8fc;
        }

        @keyframes fall {
            from {
                transform: translateY(-50px);
                opacity: 1;
            }

            to {
                transform: translateY(100vh);
                opacity: 0.3;
            }
        }

        .explode {
            animation: explode 0.6s forwards;
        }

        @keyframes explode {
            0% {
                transform: scale(1) rotate(0deg);
                opacity: 1;
            }

            100% {
                transform: scale(2) rotate(360deg);
                opacity: 0;
            }
        }

        .word.clicked-wrong {
            background-color: #dc3545 !important;
        }

        #final-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: #f8f9fa;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            z-index: 9999;
            animation: fadeIn 0.6s ease-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateX(20px);
            }

            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        #final-stats div {
            margin: 10px 0;
        }

        #restart-btn {
            margin-top: 30px;
            padding: 16px 30px;
            font-size: 26px;
            background-color: #28a745;
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        #restart-btn:hover {
            background-color: #218838;
        }

        #reset-record-btn {
            position: absolute;
            right: 20px;
            bottom: 70px;
            font-size: 18px;
            padding: 12px 20px;
            background-color: #6c757d;
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        #reset-record-btn:hover {
            background-color: #5a6268;
        }
    </style>
</head>

<body>
    <div id="game-container">
        <h1><br>–ö–ª–∏–∫–Ω–∏ –Ω–∞ –ü–†–ê–í–ò–õ–¨–ù–û –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–µ —Å–ª–æ–≤–∞!</h1>
        <div id="scoreboard">–û—á–∫–∏: <span id="score">0</span></div>
        <div id="level">–£—Ä–æ–≤–µ–Ω—å: <span id="level-number">1</span></div>
        <div id="timer">–í—Ä–µ–º—è: <span id="time">60</span>s</div>
        <div id="pause-btn">‚è∏ –ü–∞—É–∑–∞</div>
        <div id="record">–†–µ–∫–æ—Ä–¥: <span id="record-value">0</span></div>
        <div id="word-area"></div>
    </div>
    <div id="final-screen" class="hidden">
        <div id="final-stats"></div>
        <button id="restart-btn">üîÑ –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å</button>
        <button id="reset-record-btn">üóë –°–±—Ä–æ—Å–∏—Ç—å —Ä–µ–∫–æ—Ä–¥</button>
    </div>
    <audio id="sound-right" src="2right.mp3"></audio>
    <audio id="sound-wrong" src="wrong.mp3"></audio>
    <audio id="sound-away" src="away.mp3"></audio>
    <audio id="sound-level" src="level.mp3"></audio>
    <script>
        // –°–ª–æ–≤–∞—Ä—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö —Å–ª–æ–≤
        const correctWords = [
            "shop", "she", "fish", "child", "bench", "cherry", "thin", "moth", "smith",
            "this", "that", "they", "photo", "alphabet", "phone", "ring", "king", "baking",
            "car", "star", "cigar", "sister", "finger",
            "driver", "sport", "morning", "north", "girl", "bird", "skirt", "book", "look",
            "room", "moon", "spoon", "bamboo", "green", "cheese", "tree", "tea", "sea",
            "please", "mouth", "cloud", "house", "town", "crown", "brown", "snow", "pillow",
            "flow", "air", "chair", "hair", "cure", "pure", "sure", "ear", "fear", "year",
            "coin", "voice", "oil", "boy", "toy", "joy", "jam", "job", "jump", "hand", "home", 
            "hat", "wine", "we", "way", "rabbit", "rose", "red", "yellow", "yes", "you", "quest", 
            "queen", "squirrel", "exit", "sex", "fox"
        ];

        const incorrectWords = [
            "shope", "shi", "feesh", "chaild", "banch", "charry", "theen", "mose", "smeeth",
            "thees", "thet", "thei", "foto", "fone", "rin", "keeng", "bakin",
            "kar", "ctar", "cegar", "siste", "phinger",
            "draiver", "sporte", "moning", "noth", "gerl", "berd", "skert", "buk", "luk",
            "rum", "mun", "spun", "bemboo", "grin", "chize", "tri", "tee", "see",
            "pleeze", "mauth", "claud", "houze", "tovn", "crovn", "brovn", "snov", "pelow",
            "flov", "eir", "cheir", "heir", "kure", "puere", "shure", "eer", "phear", "yea",
            "koin", "voise", "oel", "boi", "toi", "goy", "jem", "jobe", "jamp", "hend", "houm", 
            "het", "wain", "wee", "wai", "rebit", "roze", "rad", "yellov", "jes", "jou", "kvest", 
            "kvin", "skvuirel", "eksit", "seks", "foks"
        ];

        // –†—É—Å—Å–∫–∏–µ –ø–µ—Ä–µ–≤–æ–¥—ã –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö —Å–ª–æ–≤
        const translations = {

            "shop": "–º–∞–≥–∞–∑–∏–Ω",
            "she": "–æ–Ω–∞",
            "fish": "—Ä—ã–±–∞",
            "child": "—Ä–µ–±—ë–Ω–æ–∫",
            "bench": "—Å–∫–∞–º–µ–π–∫–∞",
            "cherry": "–≤–∏—à–Ω—è",
            "thin": "—Ç–æ–Ω–∫–∏–π",
            "moth": "–º–æ–ª—å",
            "smith": "–∫—É–∑–Ω–µ—Ü",
            "this": "—ç—Ç–æ—Ç",
            "that": "—Ç–æ—Ç",
            "they": "–æ–Ω–∏",
            "photo": "—Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è",
            "alphabet": "–∞–ª—Ñ–∞–≤–∏—Ç",
            "phone": "—Ç–µ–ª–µ—Ñ–æ–Ω",
            "ring": "–∫–æ–ª—å—Ü–æ",
            "king": "–∫–æ—Ä–æ–ª—å",
            "baking": "–≤—ã–ø–µ—á–∫–∞",
            "car": "–º–∞—à–∏–Ω–∞",
            "star": "–∑–≤–µ–∑–¥–∞",
            "cigar": "—Å–∏–≥–∞—Ä–∞",
            "sister": "—Å–µ—Å—Ç—Ä–∞",
            "finger": "–ø–∞–ª–µ—Ü",
            "driver": "–≤–æ–¥–∏—Ç–µ–ª—å",
            "sport": "—Å–ø–æ—Ä—Ç",
            "morning": "—É—Ç—Ä–æ",
            "north": "—Å–µ–≤–µ—Ä",
            "girl": "–¥–µ–≤–æ—á–∫–∞",
            "bird": "–ø—Ç–∏—Ü–∞",
            "skirt": "—é–±–∫–∞",
            "book": "–∫–Ω–∏–≥–∞",
            "look": "—Å–º–æ—Ç—Ä–µ—Ç—å",
            "room": "–∫–æ–º–Ω–∞—Ç–∞",
            "moon": "–ª—É–Ω–∞",
            "spoon": "–ª–æ–∂–∫–∞",
            "bamboo": "–±–∞–º–±—É–∫",
            "green": "–∑–µ–ª—ë–Ω—ã–π",
            "cheese": "—Å—ã—Ä",
            "tree": "–¥–µ—Ä–µ–≤–æ",
            "tea": "—á–∞–π",
            "sea": "–º–æ—Ä–µ",
            "please": "–ø–æ–∂–∞–ª—É–π—Å—Ç–∞",
            "mouth": "—Ä–æ—Ç",
            "cloud": "–æ–±–ª–∞–∫–æ",
            "house": "–¥–æ–º",
            "town": "–≥–æ—Ä–æ–¥",
            "crown": "–∫–æ—Ä–æ–Ω–∞",
            "brown": "–∫–æ—Ä–∏—á–Ω–µ–≤—ã–π",
            "snow": "—Å–Ω–µ–≥",
            "pillow": "–ø–æ–¥—É—à–∫–∞",
            "flow": "—Ç–µ—á–µ–Ω–∏–µ",
            "air": "–≤–æ–∑–¥—É—Ö",
            "chair": "—Å—Ç—É–ª",
            "hair": "–≤–æ–ª–æ—Å—ã",
            "cure": "–ª–µ–∫–∞—Ä—Å—Ç–≤–æ",
            "pure": "—á–∏—Å—Ç—ã–π",
            "sure": "—É–≤–µ—Ä–µ–Ω–Ω—ã–π",
            "ear": "—É—Ö–æ",
            "fear": "—Å—Ç—Ä–∞—Ö",
            "year": "–≥–æ–¥",
            "coin": "–º–æ–Ω–µ—Ç–∞",
            "voice": "–≥–æ–ª–æ—Å",
            "oil": "–º–∞—Å–ª–æ",
            "boy": "–º–∞–ª—å—á–∏–∫",
            "toy": "–∏–≥—Ä—É—à–∫–∞",
            "joy": "—Ä–∞–¥–æ—Å—Ç—å",
            "jam": "–¥–∂–µ–º",
"job": "—Ä–∞–±–æ—Ç–∞",
"jump": "–ø—Ä—ã–∂–æ–∫",
"hand": "—Ä—É–∫–∞",
"home": "–¥–æ–º",
"hat": "—à–ª—è–ø–∞",
"wine": "–≤–∏–Ω–æ",
"we": "–º—ã",
"way": "–ø—É—Ç—å",
"rabbit": "–∫—Ä–æ–ª–∏–∫",
"rose": "—Ä–æ–∑–∞",
"red": "–∫—Ä–∞—Å–Ω—ã–π",
"yellow": "–∂—ë–ª—Ç—ã–π",
"yes": "–¥–∞",
"you": "—Ç—ã, –≤—ã",
"quest": "–ø–æ–∏—Å–∫",
"queen": "–∫–æ—Ä–æ–ª–µ–≤–∞",
"squirrel": "–±–µ–ª–∫–∞",
"exit": "–≤—ã—Ö–æ–¥",
"sex": "—Å–µ–∫—Å",
"fox": "–ª–∏—Å–∞",


        };

        // –†—É—Å—Å–∫–∏–µ –ø–µ—Ä–µ–≤–æ–¥—ã –¥–ª—è –ù–ï–ü–†–ê–í–ò–õ–¨–ù–´–• —Å–ª–æ–≤ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
        const incorrectTranslations = {

            "shope": "–º–∞–≥–∞–∑–∏–Ω",
            "shi": "–æ–Ω–∞",
            "feesh": "—Ä—ã–±–∞",
            "chaild": "—Ä–µ–±—ë–Ω–æ–∫",
            "banch": "—Å–∫–∞–º–µ–π–∫–∞",
            "charry": "–≤–∏—à–Ω—è",
            "theen": "—Ç–æ–Ω–∫–∏–π",
            "mose": "–º–æ–ª—å",
            "smeeth": "–∫—É–∑–Ω–µ—Ü",
            "thees": "—ç—Ç–æ—Ç",
            "thet": "—Ç–æ—Ç",
            "thei": "–æ–Ω–∏",
            "foto": "—Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è",
            "fone": "—Ç–µ–ª–µ—Ñ–æ–Ω",
            "rin": "–∫–æ–ª—å—Ü–æ",
            "keeng": "–∫–æ—Ä–æ–ª—å",
            "bakin": "–≤—ã–ø–µ—á–∫–∞",
            "kar": "–º–∞—à–∏–Ω–∞",
            "ctar": "–∑–≤–µ–∑–¥–∞",
            "cegar": "—Å–∏–≥–∞—Ä–∞",
            "siste": "—Å–µ—Å—Ç—Ä–∞",
            "phinger": "–ø–∞–ª–µ—Ü",
            "draiver": "–≤–æ–¥–∏—Ç–µ–ª—å",
            "sporte": "—Å–ø–æ—Ä—Ç",
            "moning": "—É—Ç—Ä–æ",
            "noth": "—Å–µ–≤–µ—Ä",
            "gerl": "–¥–µ–≤–æ—á–∫–∞",
            "berd": "–ø—Ç–∏—Ü–∞",
            "skert": "—é–±–∫–∞",
            "buk": "–∫–Ω–∏–≥–∞",
            "luk": "—Å–º–æ—Ç—Ä–µ—Ç—å",
            "rum": "–∫–æ–º–Ω–∞—Ç–∞",
            "mun": "–ª—É–Ω–∞",
            "spun": "–ª–æ–∂–∫–∞",
            "bemboo": "–±–∞–º–±—É–∫",
            "grin": "–∑–µ–ª—ë–Ω—ã–π",
            "chize": "—Å—ã—Ä",
            "tri": "–¥–µ—Ä–µ–≤–æ",
            "tee": "—á–∞–π",
            "see": "–º–æ—Ä–µ",
            "pleeze": "–ø–æ–∂–∞–ª—É–π—Å—Ç–∞",
            "mauth": "—Ä–æ—Ç",
            "claud": "–æ–±–ª–∞–∫–æ",
            "houze": "–¥–æ–º",
            "tovn": "–≥–æ—Ä–æ–¥",
            "crovn": "–∫–æ—Ä–æ–Ω–∞",
            "brovn": "–∫–æ—Ä–∏—á–Ω–µ–≤—ã–π",
            "snov": "—Å–Ω–µ–≥",
            "pelow": "–ø–æ–¥—É—à–∫–∞",
            "flov": "—Ç–µ—á–µ–Ω–∏–µ",
            "eir": "–≤–æ–∑–¥—É—Ö",
            "cheir": "—Å—Ç—É–ª",
            "heir": "–≤–æ–ª–æ—Å—ã",
            "kure": "–ª–µ–∫–∞—Ä—Å—Ç–≤–æ",
            "puere": "—á–∏—Å—Ç—ã–π",
            "shure": "—É–≤–µ—Ä–µ–Ω–Ω—ã–π",
            "eer": "—É—Ö–æ",
            "phear": "—Å—Ç—Ä–∞—Ö",
            "yea": "–≥–æ–¥",
            "koin": "–º–æ–Ω–µ—Ç–∞",
            "voise": "–≥–æ–ª–æ—Å",
            "oel": "–º–∞—Å–ª–æ",
            "boi": "–º–∞–ª—å—á–∏–∫",
            "toi": "–∏–≥—Ä—É—à–∫–∞",
            "goy": "—Ä–∞–¥–æ—Å—Ç—å",
            "jem": "–¥–∂–µ–º",
"jobe": "—Ä–∞–±–æ—Ç–∞",
"jamp": "–ø—Ä—ã–∂–æ–∫",
"hend": "—Ä—É–∫–∞",
"houm": "–¥–æ–º",
"het": "—à–ª—è–ø–∞",
"wain": "–≤–∏–Ω–æ",
"wee": "–º—ã",
"wai": "–ø—É—Ç—å",
"rebit": "–∫—Ä–æ–ª–∏–∫",
"roze": "—Ä–æ–∑–∞",
"rad": "–∫—Ä–∞—Å–Ω—ã–π",

"yellov": "–∂—ë–ª—Ç—ã–π",
"jes": "–¥–∞",
"jou": "—Ç—ã, –≤—ã",

"kvest": "–ø–æ–∏—Å–∫",
"kvin": "–∫–æ—Ä–æ–ª–µ–≤–∞",
"skvuirel": "–±–µ–ª–∫–∞",

"eksit": "–≤—ã—Ö–æ–¥",
"seks": "—Å–µ–∫—Å",
"foks": "–ª–∏—Å–∞",

        };

        const backgrounds = [
            "linear-gradient(to bottom, #84fab0, #8fd3f4)", // –ú—è—Ç–Ω–æ-–≥–æ–ª—É–±–æ–π  
            "linear-gradient(to bottom, #a3bded, #6991c7)", // –î—ã–º—á–∞—Ç–æ-—Å–∏–Ω–∏–π  
            "linear-gradient(to bottom, #5ee7df, #b490ca)", // –ê–∫–≤–∞-—Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π  
            "linear-gradient(to bottom, #ff8177, #ff867a, #ff8c7f)", // –ì—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–π –∫–æ—Ä–∞–ª–ª–æ–≤—ã–π  

            "linear-gradient(to bottom, #ff9a9e, #fad0c4, #fad0c4)", // –ù–µ–∂–Ω—ã–π –∫—Ä–∞—Å–Ω–æ-—Ä–æ–∑–æ–≤—ã–π  
            "linear-gradient(to bottom, #a18cd1, #fbc2eb)", // –§–∏–æ–ª–µ—Ç–æ–≤–æ-—Ä–æ–∑–æ–≤—ã–π  
            "linear-gradient(to bottom, #f6d365, #fda085)", // –Ø—Ä–∫–∏–π –æ—Ä–∞–Ω–∂–µ–≤–æ-–ø–µ—Ä—Å–∏–∫–æ–≤—ã–π  

            "linear-gradient(to bottom, #d299c2, #fef9d7)", // –†–æ–∑–æ–≤–æ-–∑–æ–ª–æ—Ç–æ–π  
            "linear-gradient(to bottom, #ff758c, #ff7eb3)", // –Ø—Ä–∫–∏–π —Ä–æ–∑–æ–≤–æ-–º–∞–ª–∏–Ω–æ–≤—ã–π  
            "linear-gradient(to bottom, #ffc3a0, #ffafbd)", // –ü–µ—Ä—Å–∏–∫–æ–≤–æ-—Ä–æ–∑–æ–≤—ã–π  
            "linear-gradient(to bottom, #c471f5, #fa71cd)", // –§–∏–æ–ª–µ—Ç–æ–≤–æ-—Ñ—É–∫—Å–∏–µ–≤—ã–π  
            "linear-gradient(to bottom, #43e97b, #38f9d7)", // –ò–∑—É–º—Ä—É–¥–Ω–æ-–±–∏—Ä—é–∑–æ–≤—ã–π  
            "linear-gradient(to bottom, #ff5858, #f09819)", // –û–≥–Ω–µ–Ω–Ω–æ-–æ—Ä–∞–Ω–∂–µ–≤—ã–π  
            "linear-gradient(to bottom, #4facfe, #00f2fe)", // –Ø—Ä–∫–∏–π —Å–∏–Ω–µ-–≥–æ–ª—É–±–æ–π  
            "linear-gradient(to bottom, #a6c1ee, #fbc2eb)", // –õ–∞–≤–∞–Ω–¥–æ–≤–æ-—Ä–æ–∑–æ–≤—ã–π  



        ];
        const buttonColors = ["#ffc107", "#28a745", "#dc3545", "#007bff"];

        // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
        let score = 0;
        let timeLeft = 60;
        let gameRunning = true;
        let spawnInterval;
        let timerInterval;
        let fallDuration = 3;
        let currentLevel = 1;
        let levelsPassed = 0;
        const stats = {
            missedCorrect: [],
            clickedWrong: [],
            clickedCorrect: []
        };

        // DOM —ç–ª–µ–º–µ–Ω—Ç—ã
        const wordArea = document.getElementById("word-area");
        const scoreDisplay = document.getElementById("score");
        const timerDisplay = document.getElementById("time");
        const levelDisplay = document.getElementById("level-number");
        const pauseBtn = document.getElementById("pause-btn");
        const finalScreen = document.getElementById("final-screen");
        const finalStats = document.getElementById("final-stats");
        const restartBtn = document.getElementById("restart-btn");
        const recordValue = document.getElementById("record-value");
        const gameContainer = document.getElementById("game-container");

        // –ê—É–¥–∏–æ
        const soundRight = document.getElementById("sound-right");
        const soundWrong = document.getElementById("sound-wrong");
        const soundAway = document.getElementById("sound-away");
        const soundLevel = document.getElementById("sound-level");
        soundRight.volume = 0.3;

        function updateScore() {
            scoreDisplay.textContent = score;
        }

        function updateTimer() {
            timerDisplay.textContent = timeLeft;
        }

        function updateLevel(level) {
            levelDisplay.textContent = level;
        }

        function createWord() {
            if (!gameRunning) return;
            const isCorrect = Math.random() > 0.5;
            const word = isCorrect
                ? correctWords[Math.floor(Math.random() * correctWords.length)]
                : incorrectWords[Math.floor(Math.random() * incorrectWords.length)];

            const wordEl = document.createElement("div");
            wordEl.className = "word";
            wordEl.dataset.correct = isCorrect;
            wordEl.dataset.word = word;
            wordEl.dataset.clicked = "false";

            // –ü–æ–ª—É—á–∞–µ–º –ø–µ—Ä–µ–≤–æ–¥
            let translation = "";
            if (isCorrect && translations[word]) {
                translation = translations[word];
            } else if (!isCorrect && incorrectTranslations[word]) {
                translation = incorrectTranslations[word];
            } else {
                translation = "–ø–µ—Ä–µ–≤–æ–¥ –Ω–µ –Ω–∞–π–¥–µ–Ω";
            }

            // wordEl.innerHTML = `<span>${word}</span><span class="translation">${translation}</span>`;
            wordEl.innerHTML = `<span class="translation">${translation}</span><span>${word}</span>`;
            wordEl.style.left = Math.random() * (window.innerWidth - 120) + "px";
            wordEl.style.animationDuration = fallDuration + "s";

            wordEl.addEventListener("click", () => {
                if (!gameRunning || wordEl.dataset.clicked === "true") return;
                if (isCorrect) {
                    wordEl.dataset.clicked = "true";

                    // –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –æ—á–∫–æ–≤: +1 –∏–ª–∏ +2 –Ω–∞ 4 —É—Ä–æ–≤–Ω–µ
                    if (currentLevel >= 4) {
                        score += 2;
                    } else {
                        score += 1;
                    }

                    updateScore();
                    stats.clickedCorrect.push(word);
                    soundRight.currentTime = 0;
                    soundRight.play();

                    // –û–∑–≤—É—á–∫–∞ —Å –ø–æ–º–æ—â—å—é —Å–∏–Ω—Ç–µ–∑–∞—Ç–æ—Ä–∞ —Ä–µ—á–∏
                    const utterance = new SpeechSynthesisUtterance(word);
                    utterance.lang = 'en-US';
                    speechSynthesis.speak(utterance);

                    wordEl.classList.add("explode");
                    setTimeout(() => wordEl.remove(), 600);
                } else {
                    wordEl.dataset.clicked = "true";
                    score -= 2;
                    updateScore();
                    stats.clickedWrong.push(word);
                    wordEl.classList.add("clicked-wrong");
                    soundWrong.currentTime = 0;
                    soundWrong.play();
                }
            });

            wordArea.appendChild(wordEl);

            setTimeout(() => {
                if (wordArea.contains(wordEl)) {
                    wordEl.remove();
                    if (isCorrect && wordEl.dataset.clicked === "false") {
                        score--;
                        updateScore();
                        stats.missedCorrect.push(word);
                        soundAway.currentTime = 0;
                        soundAway.play();
                    }
                }
            }, fallDuration * 1000);
        }

        function changeBackgroundAndSpeed() {
            if (timeLeft === 45 || timeLeft === 30 || timeLeft === 15) {
                const bgIndex = (levelsPassed + 1) % backgrounds.length;
                gameContainer.style.background = backgrounds[bgIndex];
                soundLevel.currentTime = 0;
                soundLevel.play();
                currentLevel++;
                levelsPassed++;
                updateLevel(currentLevel);
                fallDuration *= 0.85;
            }
        }

        function startGame() {
            score = 0;
            timeLeft = 60;
            fallDuration = 6;
            currentLevel = 1;
            levelsPassed = 0;
            gameRunning = true;
            updateScore();
            updateTimer();
            updateLevel(currentLevel);
            gameContainer.style.background = backgrounds[0];
            pauseBtn.style.backgroundColor = buttonColors[0];
            restartBtn.style.backgroundColor = buttonColors[0];
            stats.missedCorrect = [];
            stats.clickedWrong = [];
            stats.clickedCorrect = [];
            wordArea.innerHTML = "";
            finalScreen.classList.add("hidden");
            spawnInterval = setInterval(createWord, 1200);
            timerInterval = setInterval(() => {
                timeLeft--;
                updateTimer();
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    clearInterval(spawnInterval);
                    endGame();
                }
                changeBackgroundAndSpeed();
            }, 1000);
        }

        function endGame() {
            gameRunning = false;
            soundAway.pause();
            soundAway.currentTime = 0;
            soundLevel.pause();
            soundLevel.currentTime = 0;
            const wrongList = [...new Set(stats.clickedWrong)];
            const wrongCount = wrongList.length;
            const missedCount = stats.missedCorrect.length;
            const correctCount = stats.clickedCorrect.length;
            finalStats.innerHTML = `
            <div>üö´ –ù–∞–∂–∞—Ç–æ –ø–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Å–ª–æ–≤–∞–º: ${wrongList.join(", ")} [${wrongCount} —à—Ç.]</div>
            <div>‚ùå –ü—Ä–æ–ø—É—â–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Å–ª–æ–≤–∞: [${missedCount} —à—Ç.]</div>
            <div>‚úÖ –ù–∞–∂–∞—Ç–æ –ø–æ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Å–ª–æ–≤–∞–º: [${correctCount} —à—Ç.]</div>
            <div>üí∞ –í—Å–µ–≥–æ –∑–∞—Ä–∞–±–æ—Ç–∞–Ω–æ –æ—á–∫–æ–≤: ${score}</div>
        `;
            finalScreen.classList.remove("hidden");
            saveRecord(score);
        }

        function saveRecord(newScore) {
            const record = parseInt(localStorage.getItem("word-game-record")) || 0;
            if (newScore > record) localStorage.setItem("word-game-record", newScore);
            recordValue.textContent = localStorage.getItem("word-game-record") || 0;
        }

        pauseBtn.addEventListener("click", () => {
            if (gameRunning) {
                gameRunning = false;
                clearInterval(timerInterval);
                clearInterval(spawnInterval);
                pauseBtn.textContent = "‚ñ∂ –í–æ–∑–æ–±–Ω–æ–≤–∏—Ç—å";
            } else {
                gameRunning = true;
                timerInterval = setInterval(() => {
                    timeLeft--;
                    updateTimer();
                    if (timeLeft <= 0) {
                        clearInterval(timerInterval);
                        clearInterval(spawnInterval);
                        endGame();
                    }
                    changeBackgroundAndSpeed();
                }, 1000);
                spawnInterval = setInterval(createWord, 2000);
                pauseBtn.textContent = "‚è∏ –ü–∞—É–∑–∞";
            }
        });



        restartBtn.addEventListener("click", startGame);

        window.onload = () => {
            setTimeout(() => {
                const title = document.querySelector("h1");
                if (title) title.classList.add("hidden");
            }, 2000);
            saveRecord();
            startGame();
        };
        document.getElementById("reset-record-btn").addEventListener("click", () => {
            if (confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —Å–±—Ä–æ—Å–∏—Ç—å —Ä–µ–∫–æ—Ä–¥?")) {
                localStorage.removeItem("word-game-record");
                recordValue.textContent = "0";
                alert("–†–µ–∫–æ—Ä–¥ —É—Å–ø–µ—à–Ω–æ —Å–±—Ä–æ—à–µ–Ω!");
            }
        });

    </script>
</body>

</html>
