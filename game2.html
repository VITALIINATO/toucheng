<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Word Building Test</title>
  <style>
    /* Киберпанковые цвета */
        :root {
            --neon-purple: #c700ff;
            --neon-blue: #00f0ff;
            --neon-pink: #ff00c8;
            --neon-green: #00ff44;
            --neon-red: #ff0033;
            --dark-bg: #0a0a0a;
        }

        body {
            font-family: 'Orbitron', sans-serif;
            margin: 0;
            padding: 0;
            background: var(--dark-bg);
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            overflow: hidden;
        }

        h1 {
            font-size: 2.5rem;
            color: var(--neon-blue);
            text-shadow: 0 0 10px var(--neon-blue), 0 0 20px var(--neon-blue);
            margin-bottom: 1rem;
            animation: flicker 2s infinite;
        }

       #instruction {
      font-size: 2.5rem;
      font-weight: bold;
      text-align: center;
      margin-bottom: 20px;
  color: var(--neon-purple);
            text-shadow: 0 0 10px var(--neon-purple);
      min-height: 50px;
    }

        .container {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 90%;
            max-width: 600px;
            margin: 1rem auto;
        }

    #sentenceContainer,
    #wordBank {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
      padding: 10px;
      min-height: 100px;
      width: 90%;
      min-width: 700px;
   
      margin: 10px auto;
      border: 2px dashed #00aaff;
      background-color: transparent;
      overflow-y: auto;
      border-radius: 10px;
      align-items: center;
    }

    #sentenceContainer {
      border-color: #00ff99;
    }

    .letter {
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 10px 10px;
      background: #00aaff;
      color: white;
      border-radius: 5px;
      cursor: grab;
      user-select: none;
      text-align: center;
      min-width: 40px;
      height: 40px;
      transition: background 0.3s, transform 0.2s;
      font-size: 28px;
    }

    .letter:active {
      cursor: grabbing;
    }

    .check-container {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 15px;
      margin-top: 20px;
    }

    #checkSentence {
      min-width: 80px;
      min-height: 44px;
      padding: 10px 18px;
      background: #00c853;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 16px;
      font-weight: bold;
      transition: background 0.3s, transform 0.2s;
    }

    #checkSentence:hover {
      background: #00e676;
      transform: scale(1.1);
    }

    #resetButton {
      min-width: 80px;
      min-height: 44px;
      padding: 10px 18px;
      background: #666;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 16px;
      transition: background 0.3s, transform 0.2s;
      display: inline-block;
    }

    #resetButton:hover {
      background: #888;
      transform: scale(1.1);
    }

    #feedback {
          display: flex;
      justify-content: center;
      padding: 10px 18px;
      min-width: 80px;
      min-height: 24px;
      font-size: 16px;
      font-weight: bold;
      color: #f5f5f5;
      transition: opacity 0.3s ease;
    }

    #timer {
      font-size: 1rem;
      font-weight: bold;
      color: #cccccc;
      text-align: center;
      margin-top: 10px;
    }

    #questionNumber {
      font-size: 1rem;
      font-weight: bold;
      color: #cccccc;
      text-align: center;
      margin-top: 10px;
    }

    #finalResult {
      font-size: 1.5rem;
      font-weight: bold;
      text-align: center;
      margin-top: 30px;
      color: #00e676;
      display: none;
      animation: fadeIn 1s ease forwards;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .result-item {
      font-size: 1.2rem;
      margin: 10px 0;
    }

    .correct {
      color: #00c853;
    }

    .wrong {
      color: #d50000;
    }

    .time {
      color: #2979ff;
    }

    .glow-word {
       --neon-blue: #00f0ff;
      text-shadow: 0 0 10px rgb(0, 110, 255), 0 0 20px rgb(0, 132, 255);
      font-size: 3rem;
      font-weight: bold;
      animation: glow 1s ease-in-out infinite alternate;
    }

    @keyframes glow {
      from {
        text-shadow: 0 0 10px rgb(0, 153, 255), 0 0 20px rgb(0, 81, 255);
      }
      to {
        text-shadow: 0 0 20px rgb(0, 140, 255), 0 0 40px rgb(0, 153, 255);
      }
    }
   

  </style>
</head>
<body>

  <!-- Номер задания -->
  <p id="questionNumber">Задание 1 из 12</p>
  <h1>Собери слово</h1>
  <div id="gameContainer">
    <!-- Таймер -->
    <p id="timer">Время: 0 секунд</p>
    <!-- Перевод слова -->
    <p id="instruction"></p>
    <!-- Контейнер для собранного слова -->
    <div id="sentenceContainer"></div>
    <!-- Буквы для выбора -->
    <div id="wordBank"></div>
    <!-- Проверка -->
    <div class="check-container">
      <button id="checkSentence">Проверить</button>
      <button id="resetButton">Сбросить</button>
    
    </div>
      <p id="feedback"></p>
  </div>
  <!-- Итог -->
  <div id="finalResult"></div>

  <!-- Звуки -->
  <audio id="rightSound" src="2right.mp3"></audio>
  <audio id="wrongSound" src="wrong.mp3"></audio>

  <script>
    // Массив слов с буквами
    const words = [
     { word: "shop", correct: "shop", translation: "магазин" },
            { word: "she", correct: "she", translation: "она" },
            { word: "fish", correct: "fish", translation: "рыба" },
            { word: "child", correct: "child", translation: "ребенок" },
            { word: "bench", correct: "bench", translation: "лавочка" },
            { word: "cherry", correct: "cherry", translation: "вишня" },
            { word: "thin", correct: "thin", translation: "тонкий" },
            { word: "moth", correct: "moth", translation: "мотылек" },
            { word: "smith", correct: "smith", translation: "кузнец" },
            { word: "this", correct: "this", translation: "это" },
            { word: "that", correct: "that", translation: "то" },
            { word: "they", correct: "they", translation: "они" },
            { word: "photo", correct: "photo", translation: "фото" },
            { word: "alphabet", correct: "alphabet", translation: "алфавит" },
            { word: "phone", correct: "phone", translation: "телефон" },
            { word: "ring", correct: "ring", translation: "кольцо" },
            { word: "king", correct: "king", translation: "король" },
            { word: "baking", correct: "baking", translation: "выпечка" },
            { word: "vision", correct: "vision", translation: "зрение" },
            { word: "collision", correct: "collision", translation: "стролкновение" },
            { word: "division", correct: "division", translation: "подразделение" },
            { word: "car", correct: "car", translation: "автомобиль" },
            { word: "star", correct: "star", translation: "звезда" },
            { word: "cigar", correct: "cigar", translation: "сигара" },
            { word: "sister", correct: "sister", translation: "сестра" },
            { word: "finger", correct: "finger", translation: "палец" },
            { word: "driver", correct: "driver", translation: "водитель" },
            { word: "sport", correct: "sport", translation: "спорт" },
            { word: "morning", correct: "morning", translation: "утро" },
            { word: "north", correct: "north", translation: "север" },
            { word: "girl", correct: "girl", translation: "девушка" },
            { word: "bird", correct: "bird", translation: "птица" },
            { word: "skirt", correct: "skirt", translation: "платье" },
            { word: "book", correct: "book", translation: "книга" },
            { word: "look", correct: "look", translation: "взгляд" },
            { word: "room", correct: "room", translation: "комната" },
            { word: "moon", correct: "moon", translation: "луна" },
            { word: "spoon", correct: "spoon", translation: "ложка" },
            { word: "bamboo", correct: "bamboo", translation: "бамбук" },
            { word: "green", correct: "green", translation: "зеленый" },
            { word: "cheese", correct: "cheese", translation: "сыр" },
            { word: "tree", correct: "tree", translation: "дерево" },
            { word: "tea", correct: "tea", translation: "чай" },
            { word: "sea", correct: "sea", translation: "море" },
            { word: "please", correct: "please", translation: "пожалуйста" },
            { word: "mouth", correct: "mouth", translation: "рот" },
            { word: "cloud", correct: "cloud", translation: "облако" },
            { word: "house", correct: "house", translation: "дом" },
            { word: "town", correct: "town", translation: "город" },
            { word: "crown", correct: "crown", translation: "корона" },
            { word: "brown", correct: "brown", translation: "коричневый" },
            { word: "snow", correct: "snow", translation: "снег" },
            { word: "pillow", correct: "pillow", translation: "подушка" },
            { word: "flow", correct: "flow", translation: "поток" },
            { word: "air", correct: "air", translation: "воздух" },
            { word: "chair", correct: "chair", translation: "стул" },
            { word: "hair", correct: "hair", translation: "волосы" },
            { word: "cure", correct: "cure", translation: "лечение" },
            { word: "pure", correct: "pure", translation: "беспримесный" },
            { word: "sure", correct: "sure", translation: "уверенный" },
            { word: "ear", correct: "ear", translation: "ухо" },
            { word: "fear", correct: "fear", translation: "страх" },
            { word: "year", correct: "year", translation: "год" },
            { word: "coin", correct: "coin", translation: "монета" },
            { word: "voice", correct: "voice", translation: "голос" },
            { word: "oil", correct: "oil", translation: "масло" },
            { word: "boy", correct: "boy", translation: "мальчик" },
            { word: "toy", correct: "toy", translation: "игрушка" },
            { word: "joy", correct: "joy", translation: "радость" },
    ];

    // Добавляем массив букв в каждый объект
    words.forEach(wordObj => {
      wordObj.letters = wordObj.correct.split('');
    });

    let currentQuestionIndex = 0;
    let score = 0;
    let failedAttempts = 0;
    let totalQuestions = 12;
    let testSet = [];
    let startTime = null;
    let timerInterval = null;
    let hasFailedForCurrentWord = false;

    function startTimer() {
      clearInterval(timerInterval);
      if (!startTime) startTime = new Date();
      const timerElement = document.getElementById("timer");
      timerInterval = setInterval(() => {
        const elapsed = Math.floor((new Date() - startTime) / 1000);
        timerElement.textContent = `${elapsed} секунд`;
      }, 1000);
    }

    function setupGame() {
      const questionNumberEl = document.getElementById("questionNumber");
      const instruction = document.getElementById("instruction");
      const wordBank = document.getElementById("wordBank");
      const sentenceContainer = document.getElementById("sentenceContainer");
      const feedback = document.getElementById("feedback");

      if (currentQuestionIndex >= testSet.length) {
        showFinalResult();
        return;
      }

      const wordObj = testSet[currentQuestionIndex];
      const letters = [...wordObj.letters];
      shuffleArray(letters);

      hasFailedForCurrentWord = false;
      questionNumberEl.textContent = `${currentQuestionIndex + 1} из ${testSet.length}`;
      instruction.textContent = `"${wordObj.translation}"`;
      feedback.textContent = "";

      wordBank.innerHTML = "";
      sentenceContainer.innerHTML = "";

      letters.forEach(letter => {
        const letterEl = document.createElement("span");
        letterEl.className = "letter";
        letterEl.textContent = letter;
        makeDraggable(letterEl);
        letterEl.addEventListener("click", () => {
          if (letterEl.parentElement === wordBank) {
            sentenceContainer.appendChild(letterEl);
          } else {
            wordBank.appendChild(letterEl);
          }
        });
        wordBank.appendChild(letterEl);
      });

      // Проверка
      document.getElementById("checkSentence").onclick = () => {
        const userWord = Array.from(sentenceContainer.children)
          .map(el => el.textContent)
          .join("");

        const correctWord = wordObj.correct;

        if (userWord === correctWord) {
          feedback.textContent = "Верно! 👍";
          feedback.style.color = "#00c853";

          // Звук
          document.getElementById("rightSound").play();

          // Анимация объединения букв
          Array.from(sentenceContainer.children).forEach((el, i) => {
            el.classList.remove("letter");
            el.classList.add("glow-word");
            el.style.transition = `transform 0.5s ease ${i * 0.1}s`;
            el.style.transform = "scale(1.5)";
          });

          score++;

          setTimeout(() => {
            currentQuestionIndex++;
            setupGame();
          }, 1500);
        } else {
          feedback.textContent = "Неверно 👎";
          feedback.style.color = "#d50000";

          if (!hasFailedForCurrentWord) {
            document.getElementById("wrongSound").play();
            hasFailedForCurrentWord = true;
            failedAttempts++;
          }
        }
      };

      // Сброс
      document.getElementById("resetButton").onclick = () => {
        const letters = [...testSet[currentQuestionIndex].letters];
        shuffleArray(letters);

        wordBank.innerHTML = "";
        sentenceContainer.innerHTML = "";

        letters.forEach(letter => {
          const letterEl = document.createElement("span");
          letterEl.className = "letter";
          letterEl.textContent = letter;
          makeDraggable(letterEl);
          letterEl.addEventListener("click", () => {
            if (letterEl.parentElement === wordBank) {
              sentenceContainer.appendChild(letterEl);
            } else {
              wordBank.appendChild(letterEl);
            }
          });
          wordBank.appendChild(letterEl);
        });

        feedback.textContent = "";
      };

      startTimer();
    }

    function shuffleArray(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }

    function startTest() {
      const shuffled = [...words].sort(() => Math.random() - 0.5);
      testSet = shuffled.slice(0, totalQuestions);
      currentQuestionIndex = 0;
      score = 0;
      failedAttempts = 0;
      setupGame();
    }

    // Drag & Drop функциональность
    function makeDraggable(element) {
      element.draggable = true;

      element.addEventListener("dragstart", e => {
        e.dataTransfer.setData("text/plain", e.target.textContent);
        e.dataTransfer.effectAllowed = "move";
        e.dataTransfer.dropEffect = "move";
        e.target.classList.add("dragging");
      });

      element.addEventListener("dragend", e => {
        e.target.classList.remove("dragging");
      });
    }

    function enableDrop(container) {
      container.addEventListener("dragover", e => {
        e.preventDefault();
        e.dataTransfer.dropEffect = "move";
      });

      container.addEventListener("drop", e => {
        e.preventDefault();
        const data = e.dataTransfer.getData("text/plain");
        const draggingEl = [...container.querySelectorAll(".letter")].find(el => el.textContent === data);

        if (draggingEl && draggingEl.parentElement !== container) {
          container.appendChild(draggingEl);
        }
      });
    }

    enableDrop(document.getElementById("wordBank"));
    enableDrop(document.getElementById("sentenceContainer"));

    document.addEventListener("DOMContentLoaded", () => {
      startTest();
    });
  </script>
</body>
</html>
